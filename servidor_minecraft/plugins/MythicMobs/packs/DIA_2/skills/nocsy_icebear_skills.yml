nanook_first_orbital:
  Skills:
  - orbital{r=15;oy=20;i=1;duration=200;points=128;sp=0;
            onTick=[
              - particles{p=redstone;c=#20c3d0;a=20;hs=1.9;vs=0.5;size=3} @origin
              - particles{p=cloud;a=1;hs=1;vs=0.5;speed=0.08} @origin 0.2
              - particles{p=BLOCK_CRACK;material=BLUE_ICE;a=1;hs=1;vs=0.5;speed=0.08} @origin 0.2
              <#>- particles{p=DRIP_WATER;a=5;hs=1;vs=0.5;speed=0.2;speed=0.08} @origin 0.4
            ]} @self
  - orbital{r=15;oy=20;i=1;duration=200;points=128;sp=64;
            onTick=[
              - particles{p=redstone;c=#20c3d0;a=20;hs=1.9;vs=0.5;size=3} @origin
              - particles{p=cloud;a=1;hs=1;vs=0.5;speed=0.08} @origin 0.2
              - particles{p=BLOCK_CRACK;material=BLUE_ICE;a=1;hs=1;vs=0.5;speed=0.08} @origin 0.2
              <#>- particles{p=DRIP_WATER;a=5;hs=1;vs=0.5;speed=0.2;speed=0.08} @origin 0.4
            ]} @self

  - orbital{r=10;oy=20;i=1;duration=200;points=100;sp=0;
            onTick=[
              - particles{p=redstone;c=#3fd0d4;a=20;hs=1.9;vs=0.3;size=2.5} @origin
              - particles{p=cloud;a=1;hs=1;vs=0.3;speed=0.08;size} @origin 0.2
              - particles{p=BLOCK_CRACK;material=BLUE_ICE;a=1;hs=1;vs=0.3;speed=0.08;size} @origin 0.2
              <#>- particles{p=DRIP_WATER;a=5;hs=1;vs=0.3;speed=0.2;speed=0.08;size} @origin 0.4
            ]} @self
  - orbital{r=10;oy=20;i=1;duration=200;points=100;sp=50;
            onTick=[
              - particles{p=redstone;c=#3fd0d4;a=20;hs=1.9;vs=0.3;size=2.5} @origin
              - particles{p=cloud;a=1;hs=1;vs=0.3;speed=0.08;size} @origin 0.2
              - particles{p=BLOCK_CRACK;material=BLUE_ICE;a=1;hs=1;vs=0.3;speed=0.08;size} @origin 0.2
              <#>- particles{p=DRIP_WATER;a=5;hs=1;vs=0.3;speed=0.2;speed=0.08;size} @origin 0.4
            ]} @self

  - orbital{r=5;oy=20;i=1;duration=200;points=70;sp=0;
            onTick=[
              - particles{p=redstone;c=#b9e8ea;a=20;hs=1.9;vs=0.2;size=2} @origin
              - particles{p=cloud;a=1;hs=1;vs=0.2;speed=0.08} @origin 0.2
              - particles{p=BLOCK_CRACK;material=BLUE_ICE;a=1;hs=1;vs=0.2;speed=0.08} @origin 0.2
              <#>- particles{p=DRIP_WATER;a=5;hs=1;vs=0.2;speed=0.2;speed=0.08} @origin 0.4
            ]} @self
  - orbital{r=5;oy=20;i=1;duration=200;points=70;sp=35;
            onTick=[
              - particles{p=redstone;c=#b9e8ea;a=20;hs=1.9;vs=0.2;size=2} @origin
              - particles{p=cloud;a=1;hs=1;vs=0.2;speed=0.08} @origin 0.2
              - particles{p=BLOCK_CRACK;material=BLUE_ICE;a=1;hs=1;vs=0.2;speed=0.08} @origin 0.2
              <#>- particles{p=DRIP_WATER;a=5;hs=1;vs=0.2;speed=0.2;speed=0.08} @origin 0.4
            ]} @self 

nanook_channelling:
  Skills:
  - setstance{s=channeling} @self
  - setai{ai=false} @self
  - setai{ai=true;delay=50} @self
  - setstance{s=active;delay=50} @self
  - skill:nanook_orbital_parent

  - particlering{p=BLOCK_MARKER;m=ICE;hs=0.0;vs=0.0;r=15;a=1;repeat=3;repeatInterval=40;points=100;y=10} @spawnlocation

  - skill{s=[
    - skill{s=[
      - effect:lightning{localized=true} @RLNTL{r=15;minr=4;a=2;s=2}
      ]} @spawnlocation
    ];repeat=2;repeatInterval=25} @spawnlocation

  - skill{s=[
    - skill{s=[
      - projectile{bulletType=DISPLAY;bulletMaterial=ICE;bulletScale=0.8,0.8,0.8;i=1;v=0;g=0.75;type=METEOR;syo=0;hfs=25;d=100;mr=24;hnp=false;hp=true;hR=1.5;vR=1.5;stopAtBlock=true;
        oT=[
            - particles{particle=block_crack;material=ICE;a=1;hs=0.25;vs=0.25;s=0.1;y=0} @origin
            - particles{particle=GLOW;a=1;hs=0.15;vs=0.15;s=0.1;y=0} @origin
          ];
        oH=[
            - damage{a=4}
          ];
        oE=[
            - particles{p=CLOUD;a=1;hs=0.15;vs=0.1;speed=0.12;directional=true} @RingAroundOrigin{r=1.5;points=8}
            - sound{s=block.glass.break;p=1.2} @origin
            - particles{particle=block_crack;material=ICE;a=1;hs=0.25;vs=0.1;s=0.1;y=0} @origin
            - damage{a=<caster.damage>} @PlayersNearOrigin{r=1.2}
          ]}
      - totem{d=40;i=10;yo=0.2;
              oS=[
                - summon{t=prop_nanook_red_tile} @origin
              ]}
      ]} @RLNTE{a=<random.9-12>;r=15;minr=3;s=2}
    ];repeat=4;repeatInterval=25;delay=75} @spawnlocation
  
#

nanook_orbital_child:
  Skills:
  - orbital{r=15;oy=20;i=1;duration=60;points=128;sp=<skill.sp>;i=1;
            onTick=[
              - particles{p=CLOUD;speed=0;hs=0.25;vs=0.25;a=1} @origin
              - particles{p=SPARK;speed=0;hs=0.05;vs=0.05;a=1} @origin
              - particles{p=REDSTONE;c=#20c3d0;size=1;speed=0;hs=0.35;vs=0.25;a=1} @origin
              - modifyProjectile{trait=RADIUS;action=MULTIPLY;value=0.97}
            ]} @spawnlocation

nanook_orbital_parent:
  Skills:
  - skill{s=[
    - skill:nanook_orbital_child{sp=0}
    - skill:nanook_orbital_child{sp=16}
    - skill:nanook_orbital_child{sp=32}
    - skill:nanook_orbital_child{sp=48}
    - skill:nanook_orbital_child{sp=64}
    - skill:nanook_orbital_child{sp=80}
    - skill:nanook_orbital_child{sp=96}
    - skill:nanook_orbital_child{sp=112}
    ];repeat=7;repeatInterval=15}

nanook_ice_charge:
  Conditions:
  - targets{a=>0} true
  Skills:
  - setstance{s=ice_charge} @self
  - setai{ai=false} @self
  - stateToggle{s=icefist_run;speed=1.5} @self
  - projectile{
    drawhitbox=false;
    highaccuracymode=true;
    <#>bulletForwardOffset=5;
    bulletYOffset=0;
    i=1;d=200;mr=50;
    hR=2.5;vR=2;
    hp=true;hnp=false;
    sb=true;se=false;
    syo=3;tyo=3;
    v=20;
    onStart=[
      - sound{s=entity.polar_bear.warning;v=8} @self
      ];
    onTick=[
      - teleport{} @projectileforward{f=-3;yOffset=-3}
      - sound{s=entity.zoglin.step;p=-1.2;cd=0.1;v=2} @origin
      - particles{p=CLOUD;a=2;hs=1.7;vs=0.7;y=-5;speed=0.7;directional=true;fromOrigin=true;origin=@origin;delay=5} @projectileforward{f=-6.5}
      - particles{p=SWEEP_ATTACK;a=4;hs=1.2;vs=0.7;y=-1;speed=0.1} @projectileforward{f=-1.5}
      ];
    onHit=[
      - throw{velocity=18;velocityY=5}
      - damage{a=6}
      ];
    oHB=[
      - skill{s=[
        - stateToggle{s=icefist_run} @self
        - setstance{s=active} @self
        - setai{ai=true} @self
        - blockwave{v=2;vy=2;d=40;hs=false} @BlocksNearOrigin{r=4.5;noise=0.25}
        ]} ?!onblock{m=packed_ice}
      - skill{s=[
        - modstate{mid=nocsy_icebear_boss;s=icefist_run;sp=0} @self
        - onDamaged{auraName=frozen;d=200;m=2} @self
        - blockwave{m=PACKED_ICE;v=2;vy=2;d=80;hs=false} @BlocksNearOrigin{r=4.5;noise=0.4}
        - particles{p=REDSTONE;size=3;c=#668eab;a=8;hs=1.5;vs=2;y=1.5;repeat=10;repeatInterval=20} @self
        - particles{p=REDSTONE;size=3;c=#b1c4d8;a=8;hs=1.5;vs=2;y=1.5;repeat=10;repeatInterval=20} @self
        - sound{s=block.glass.break;p=-1.3;v=4} @origin
        - sound{s=block.basalt.break;p=-1.3;v=4} @origin
        - sound{s=block.snow.break;p=-1.3;v=4;repeat=10;repeatInterval=20} @origin
        - sound{s=block.glass.hit;p=-1.3;v=4;repeat=10;repeatInterval=20} @origin
        - tint{c=80BBF7} @self
        - delay 200
        - tint{c=FFFFFF} @self
        - setai{ai=true} @self
        - stateToggle{s=icefist_run} @self
        - state{s=roar;li=0;lo=0} @self
        - delay 36
        - throw{vy=10;v=10} @PIR{r=7}
        - sound{s=entity.ravager.roar;v=12;p=0.3} @self
        - delay 50
        - setstance{s=active} @self
        ]} ?onblock{m=packed_ice}
      ];
      oE=[
        - setai{ai=true} @self
        - state{s=icefist_run;remove=true} @self
        - setstance{s=active} @self
      ]
    } @forward{f=4;lockpitch=true}

nanook_ice_fist_ground:
  Skills:
  - setstance{s=ice_ground} @self
  - setai{ai=false} @self
  - setai{ai=true;delay=70} @self
  - state{s=icepunch_ground} @self
  - sound{s=entity.ravager.attack;p=-1.3;v=4} @self
  - delay 30
  - projectile{
    drawhitbox=false;
    i=2;d=80;mr=40;
    hR=1;vR=3;
    hp=true;hnp=false;hs=false;
    sb=false;se=false;
    syo=-1;tyo=-1;sfo=0;
    v=6;
    onStart=[
      - vfx{mid=nocsy_icebear_iceshard;pid=icepeak}
      - vfxrot{rot=0,0,0}
      - vfxpos{y=1.5}
      - sound{s=entity.generic.explode;p=-2;v=4} @self
      - sound{s=entity.ravager.hurt;p=-2;v=4} @self
      ];
    onTick=[
      - particles{p=BLOCK_CRACK;m=BLUE_ICE;a=2;hs=0.25;v=0.25;y=1.2} @origin
      - particles{p=redstone;size=3;c=#668eab;a=2;hs=0.25;v=0.25;y=1.2} @origin
      - sound{s=block.chorus_flower.grow;p=1.2} @origin
      <#>- sound{s=entity.bee.loop_aggressive;p=1.2} @origin
      <#>- sound{s=block.chorus_flower.death;p=1.2} @origin
      - blockmask{m=ice;r=1;d=60} @origin
      - totem{d=60;i=10;yo=0.2;
              onTick=[
                - freeze{ticks=40} @PlayersNearOrigin{r=2}
                - potion{t=SLOW;l=2;d=20;i=false;p=false} @PlayersNearOrigin{r=2}
                - damage{a=1;pkb=true;pi=false} @PlayersNearOrigin{r=2}
                ];
              }
      ];
    onEnd=[
      - particles{p=SOULFLAME;a=4;directional=true;hs=0.15;vs=0.05;speed=0.15;y=1.2} @RingAroundOrigin{r=2;points=16}
      ];
    } @ring{p=9;r=15}
  - delay 80
  - setstance{s=active} @self

# TODO: replace sting vfx part with a fingernail of nanook
nanook_claw_fist_projectile:
  Skills:
  - setstance{s=claw_projectile} @self
  - state{s=forward_claw_projectile} @self
  - delay 25
  - sound{s=entity.evoker_fangs.attack;v=4} @self
  - projectile{
    mr=30;d=60;
    v=30;i=1;
    vR=1;hR=1;
    hnp=false;hp=true;
    se=false;sb=true;
    sfo=0;
    syo=0.5;tyo=0.5;sso=2;
    onStart=[
      - vfx{mid=nocsy_icebear_claws;pid=claws_slash_medium}
      - vfxrot{rot=0,0,0}
      - vfxpos{y=-0.5}
      ];
    onTick=[
      - particles{p=block_crack;m=cobbled_deepslate;a=2;hS=0.5} @origin
      - particles{p=CRIT_MAGIC;a=2;hS=0.5} @origin
      - particles{p=SWEEP_ATTACK;a=1;hS=0.5} @origin
      - sound{s=entity.player.attack.sweep;p=-1;cd=0.3} @origin 
      ];
    onHit=[
      - damage{a=6}
      ];
    } @forward{f=6;lockpitch=true}
  - projectile{
    mr=30;d=60;
    v=30;i=1;
    vR=1;hR=1;
    hnp=false;hp=true;
    se=false;sb=true;
    sfo=0;
    syo=0.5;tyo=0.5;sso=2;
    onStart=[
      - vfx{mid=nocsy_icebear_claws;pid=claws_slash_big}
      - vfxrot{rot=0,0,0}
      - vfxpos{y=-0.5}
      ];
    onTick=[
      - particles{p=block_crack;m=cobbled_deepslate;a=2;hS=0.5} @origin
      - particles{p=CRIT_MAGIC;a=2;hS=0.5} @origin
      - particles{p=SWEEP_ATTACK;a=1;hS=0.5} @origin
      - sound{s=entity.player.attack.sweep;p=-1;cd=0.3} @origin 
      ];
    onHit=[
      - damage{a=6}
      ];
    } @forward{f=6;sideOffset=1;lockpitch=true}
  - projectile{
    mr=30;d=60;
    v=30;i=1;
    vR=1;hR=1;
    hnp=false;hp=true;
    se=false;sb=true;
    sfo=0;
    syo=0.5;tyo=0.5;sso=2;
    onStart=[
      - vfx{mid=nocsy_icebear_claws;pid=claws_slash_medium}
      - vfxrot{rot=0,0,0}
      - vfxpos{y=-0.5}
      ];
    onTick=[
      - particles{p=block_crack;m=cobbled_deepslate;a=2;hS=0.5} @origin
      - particles{p=CRIT_MAGIC;a=2;hS=0.5} @origin
      - particles{p=SWEEP_ATTACK;a=1;hS=0.5} @origin
      - sound{s=entity.player.attack.sweep;p=-1;cd=0.3} @origin 
      ];
    onHit=[
      - damage{a=6}
      ];
    } @forward{f=6;sideOffset=-1;lockpitch=true}
  - projectile{
    mr=30;d=60;
    v=30;i=1;
    vR=1;hR=1;
    hnp=false;hp=true;
    se=false;sb=true;
    sfo=0;
    syo=0.5;tyo=0.5;sso=2;
    onStart=[
      - vfx{mid=nocsy_icebear_claws;pid=claws_slash_medium}
      - vfxrot{rot=0,0,0}
      - vfxpos{y=-0.5}
      ];
    onTick=[
      - particles{p=block_crack;m=cobbled_deepslate;a=2;hS=0.5} @origin
      ];
    onHit=[
      - damage{a=6}
      ];
    } @forward{f=6;sideOffset=2;lockpitch=true} <50%
  - projectile{
    mr=30;d=60;
    v=30;i=1;
    vR=1;hR=1;
    hnp=false;hp=true;
    se=false;sb=true;
    sfo=0;
    syo=0.5;tyo=0.5;sso=2;
    onStart=[
      - vfx{mid=nocsy_icebear_claws;pid=claws_slash_medium}
      - vfxrot{rot=0,0,0}
      - vfxpos{y=-0.5}
      ];
    onTick=[
      - particles{p=block_crack;m=cobbled_deepslate;a=2;hS=0.5} @origin
      ];
    onHit=[
      - damage{a=6}
      ];
    } @forward{f=6;sideOffset=-2;lockpitch=true} <50%
  - delay 60
  - setstance{s=active} @self

nanook_attack_claw:
  Skills:
  - state{s=claw_punch} @self
  - setstance{s=attack} @self
  - particles{p=block_crack;m=cobbled_deepslate;a=1;repeat=39;repeati=1;vS=0.3;hS=0.3} @modelpart{p=right_hand}
  - delay 20
  - sound{s=entity.ravager.attack;p=0.4;v=2} @self
  - sound{s=entity.player.attack.sweep;p=0.1} @modelpart{p=right_hand}
  - damage{a=12} @EIC{r=5;a=180;conditions=[ - isPlayer{} true ]}
  - setstance{s=active} @self
nanook_attack_fist:
  Skills:
  - state{s=ice_punch} @self
  - setstance{s=attack} @self
  - particles{p=block_crack;m=ice;a=1;repeat=39;repeati=1;vS=0.8;hS=0.8} @modelpart{p=left_hand}
  - delay 20
  - sound{s=entity.ravager.attack;p=0.4;v=2} @self
  - sound{s=entity.player.attack.crit;p=0.5} @modelpart{p=left_hand}
  - damage{a=10} @EIC{r=5;a=180;conditions=[ - isPlayer{} true ]}
  - freeze{ticks=40} @EIC{r=5;a=180;conditions=[ - isPlayer{} true ]}
  - potion{t=SLOW;l=2;d=20;i=false;p=false} @EIC{r=5;a=180;conditions=[ - isPlayer{} true ]}
  - setstance{s=active} @self

nanook_jump_smash:
  Skills:
  - setstance{s=jump_smash} @self
  - skill{s=[
    - state{s=jump_smash;li=10;lo=10} @self
    - setai{ai=false} @self
    - delay 32
    - projectile{
      drawhitbox=false;
      highaccuracymode=true;
      <#>bulletForwardOffset=5;
      bulletYOffset=0;
      i=1;d=21;mr=50;
      hR=2.5;vR=2;
      hp=true;hnp=false;
      sb=true;se=false;
      syo=3;tyo=3;
      v=12;
      onStart=[
        - sound{s=entity.polar_bear.warning;v=8} @self
        ];
      onTick=[
        - teleport{} @projectileforward{f=-3;yOffset=-3}
        - particles{p=CLOUD;a=2;hs=1.7;vs=0.7;y=-5;speed=0.5;directional=true;fromOrigin=true;origin=@origin;delay=5} @projectileforward{f=-6.5}
        ];
      } @forward{f=4;lockpitch=true}
    - delay 21
    - sound{s=entity.zombie_villager.cure;p=1.5;v=3} @self
    - setai{ai=true} @self
    - projectile{
      mr=30;d=60;
      v=30;i=1;
      vR=1;hR=1;
      hnp=false;hp=true;
      se=false;sb=true;
      sfo=0;
      syo=1;tyo=1;sso=2;
      onStart=[
        - vfx{mid=nocsy_icebear_claws;pid=claws_slash_medium}
        - vfxtint{ca=80BBF7;cb=2FAEFF;duration=100}
        - vfxrot{rot=0,0,0}
        - vfxpos{y=-0.5}
        ];
      onTick=[
        - particles{p=block_crack;m=cobbled_deepslate;a=2;hS=0.5} @origin
        ];
      onHit=[
        - damage{a=6}
        - freeze{ticks=60}
        - potion{t=SLOW;l=2;d=60;i=false;p=false}
        ];
      } @ring{r=16;p=18;ry=<random.0to20>}
    ];repeat=2;repeati=60}
  - delay 180
  - setstance{s=active} @self
# 563Q0N8K